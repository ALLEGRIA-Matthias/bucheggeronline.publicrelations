<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:v="http://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers"
      v:schemaLocation="https://fluidtypo3.org/schemas/vhs-master.xsd"
      data-namespace-typo3-fluid="true">

<f:layout name="Eventcenter" />

<f:section name="buttons">
<f:link.action action="show" controller="Event" class="btn btn-sm btn-default" arguments="{event:event}"><svg class="icon icon-sm fill-dark mr-2"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#times"></use></svg>Abbrechen</f:link.action>
</f:section>

<f:section name="content">
    <h1>Akkreditierungs-Wizzard</h1>
    <p>Mit dem Akkreditierungs-Wizzard lassen sich im Handumdrehen mehrere Akkreditierungen erstellen.<br/>Die <strong>Basisdaten</strong> gelten als Standard für alle zu generierenden Akkreditierungen, ausgewählte Optionen können bei Bedarf pro Akkreditierung überschrieben werden.</p>

    <f:flashMessages queueIdentifier="allegria.publicrelations.flashMessages" />
    <f:form action="create" enctype="multipart/form-data" name="settings" arguments="{event:event}">
    <f:form.hidden name="formType" value="wizzardBackend" />

    <f:render partial="Accreditation/FormBasics" arguments="{propertyToName:'1'}" />

    <f:for each="{loadNewAccr}" as="accrId">
      <f:render section="singleAccreditation" arguments="{_all}" />
    </f:for>

    <f:render partial="Accreditation/FormOptions" arguments="{event:event, notesItems:notesItems, wizzard:'1'}" />

    <div class="col-12">
      <f:form.submit value="Jetzt generieren" class="btn btn-sm btn-success mr-3" />
    </div>

    </f:form>
</f:section>

<f:section name="singleAccreditation">
<div class="alert alert-dark" role="alert">
  <h4>Gast {accrId}</h4>

  <div class="row">
    <div class="col-12 col-md-4">
      <div class="form-group">
        <label for="selectGuest"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#user"></use></svg>Kontaktauswahl</label>
        <div class="input-group w-100">
            <f:form.select 
                class="form-control select-contact"
                id="contactSelect{accrId}" 
                property="newAccreditations.{accrId}.guest"
                style="width: 100%;" 
                data="{
                    contacts-nomailing:'false',
                    contacts-maxresults:'20',
                    contacts-pid:'6,40,44'
                }" 
                placeholder="Kontakt suchen..." />
        </div>
      </div>
    </div>

    <div class="col-12 col-md-4" data-collapse="newAccrContact{accrId}">
      <div class="form-group">
        <label for="inputCompany{accrId}"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#factory"></use></svg>Firma / Medium</label>
        <div class="input-group w-100">
          <f:form.textfield class="form-control" id="inputCompany{accrId}" property="newAccreditations.{accrId}.company" />
        </div>
      </div>
    </div>

    <div class="col-6 col-md-2">
      <div class="form-group">
        <label for="selectType{accrId}"><svg class="icon fill-green mr-2"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#tag"></use></svg>Gästetyp</label>
        <div class="input-group w-100">
          <f:form.select class="form-control tomselect-generic" data="{select2-id: 'accreditation-select-type-{accrId}'}" id="selectType{accrId}" property="newAccreditations.{accrId}.guestType">
            <f:form.select.option value="">Gästetyp überschreiben...</f:form.select.option>
            <f:form.select.option value="1" selected="{f:if(condition:'{accreditation.guestType}==1', then:'1')}">VIP</f:form.select.option>
            <f:form.select.option value="6" selected="{f:if(condition:'{accreditation.guestType}==6', then:'1')}">Talent</f:form.select.option>
            <f:form.select.option value="2" selected="{f:if(condition:'{accreditation.guestType}==2', then:'1')}">Presse</f:form.select.option>
            <f:form.select.option value="3" selected="{f:if(condition:'{accreditation.guestType}==3', then:'1')}">Gewinnspiel</f:form.select.option>
            <f:form.select.option value="4" selected="{f:if(condition:'{accreditation.guestType}==4', then:'1')}">Füllkarten</f:form.select.option>
            <f:form.select.option value="5" selected="{f:if(condition:'{accreditation.guestType}==5', then:'1')}">Personal</f:form.select.option>
          </f:form.select>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-2">
      <div class="form-group">
        <label for="inputTicketsApproved{accrId}"><svg class="icon fill-green mr-2"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#ticket"></use></svg>Tickets</label>
        <div class="input-group w-100">
          <f:form.textfield class="form-control" id="inputTicketsApproved{accrId}" property="newAccreditations.{accrId}.ticketsApproved" value="" type="number" />
        </div>
      </div>
    </div>

    <div class="col-6 col-md-2" data-collapse="newAccrContact{accrId}">
      <div class="form-group">
        <label for="selectManualGender{accrId}"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#user-parents-alt"></use></svg>Geschlecht</label>
        <div class="input-group w-100">
          <f:form.select class="form-control tomselect-generic" data="{select2-id: 'accreditation-select-gender-{accrId}'}" id="selectManualGender{accrId}" property="newAccreditations.{accrId}.gender">
            <f:form.select.option value="2">Männlich</f:form.select.option>
            <f:form.select.option value="1" selected="1">Weiblich</f:form.select.option>
            <f:form.select.option value="0">Sonstig</f:form.select.option>
          </f:form.select>
        </div>
      </div>
    </div>

    <div class="col-6 col-md-2" data-collapse="newAccrContact{accrId}">
      <div class="form-group">
        <label for="inputTitle{accrId}"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#crown"></use></svg>Titel</label>
        <div class="input-group w-100">
          <f:form.textfield class="form-control" id="inputTitle{accrId}" property="newAccreditations.{accrId}.title" />
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4" data-collapse="newAccrContact{accrId}">
      <div class="form-group">
        <label for="inputFirstName{accrId}"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#user"></use></svg>Vorname</label>
        <div class="input-group w-100">
          <f:form.textfield class="form-control" id="inputFirstName{accrId}" property="newAccreditations.{accrId}.firstName" />
        </div>
      </div>
    </div>

    <div class="col-6 col-md-4" data-collapse="newAccrContact{accrId}">
      <div class="form-group">
        <label for="inputLastName{accrId}"><svg class="icon icon-sm mr-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#user"></use></svg>Nachname</label>
        <div class="input-group w-100">
          <f:form.textfield class="form-control" id="inputLastName{accrId}" property="newAccreditations.{accrId}.lastName" />
        </div>
      </div>
    </div>
  </div>
</div>
</f:section>
</html>
