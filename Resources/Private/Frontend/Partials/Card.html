<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">

<f:if condition="{type}=='normal'">
<div class="card {f:if(condition:'{sticky}', then:'{sticky}')}">
  <f:if condition="{image}"><f:image image="{image}" maxHeight="500" class="card-img-top img-fluid" alt="{title}"/></f:if>
  <div class="card-body">
    <f:if condition="{campaign}"><p class="text-primary small strong text-uppercase mb-0">{campaign.type.title}</p></f:if>
    <h5 class="card-title">{title}</h5>
    <f:if condition="{client} || {campaign} || {news} || {text}">
    <p class="card-text text-truncate small">
      <f:if condition="{client}">
        <f:if condition="{client.shortinfo}"><svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#circle-info"></use></svg> {client.shortinfo}<br/></f:if>
        <svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#filter"></use></svg> <f:for each="{client.types}" as="type" iteration="i"><f:if condition="!{i.isFirst}">, </f:if>{type.title}</f:for><br/>
        <f:comment><svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#{f:if(condition:'{client.activities->f:count()}>1', then:'tags', else:'tag')}"></use></svg> <f:for each="{client.activities}" as="activity" iteration="ai"><f:if condition="!{ai.isFirst}">, </f:if>{activity.title}</f:for><br/></f:comment>
        <f:if condition="{client.since}"><svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#history"></use></svg> Kunde<f:if condition="!{client.archive} && !{client.until}"> seit</f:if> {client.since->f:format.date(format:'%Y')}<f:if condition="{client.until} && ({client.since->f:format.date(format:'%Y')}!={client.until->f:format.date(format:'%Y')})">-{client.until->f:format.date(format:'%Y')}</f:if></f:if>
      </f:if>
      <f:if condition="{campaign}">
        <f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Client" action="show" arguments="{client:campaign.client}" class="btn btn-primary btn-sm w-100">zurück zum Kunden<br/><strong class="text-uppercase">{campaign.client.shortName}</strong></f:link.action>
      </f:if>
      <f:if condition="{news}">
        <f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Client" action="show" arguments="{client:news.client}" class="btn btn-primary btn-sm w-100">zurück zum Kunden<br/><strong class="text-uppercase">{news.client.shortName}</strong></f:link.action>
      </f:if>
      <f:if condition="{text}">{text}</f:if>
    </p>
    </f:if>
  </div>
  <div class="card-footer">
    <f:for each="{client.activities}" as="activity" iteration="ai"><span class="badge bg-light text-dark me-1"><svg class="icon icon-sm me-1"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#tag"></use></svg>{activity.title}</span></f:for>
  </div>
  <f:if condition="{contacts}">
    <f:render partial="Contacts" arguments="{contacts:contacts}" />
  </f:if>
</div>
</f:if>

<f:if condition="{type}=='list'">
<div class="card">
  <f:if condition="{image}">
    <f:if condition="{client}"><f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Client" action="show" arguments="{client:client}" pageUid="39"><f:image image="{image}" maxHeight="500" class="card-img-top img-fluid" alt="{title}"/></f:link.action></f:if>
    <f:if condition="{campaign}"><f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Campaign" action="show" arguments="{campaign:campaign}" pageUid="39"><f:image image="{image}" maxHeight="500" class="card-img-top img-fluid" alt="{title}" cropVariant="thumb" /></f:link.action></f:if>
  </f:if>
  <div class="card-body">
    <h5 class="card-title text-truncate">{title}</h5>
    <f:if condition="{client} || {campaign} || {text}">
    <p class="card-text text-truncate small">
      <f:if condition="{client}">
        <f:if condition="{client.shortinfo}"><svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#circle-info"></use></svg> {client.shortinfo}<br/></f:if>
        <svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#filter"></use></svg> <f:for each="{client.types}" as="type" iteration="i"><f:if condition="!{i.isFirst}">, </f:if>{type.title}</f:for><br/>
        <f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Client" action="show" arguments="{client:client}" pageUid="39" class="btn btn-light w-100 mt-3 text-uppercase fw-bold">Zum Kunden</f:link.action>
      </f:if>
      <f:if condition="{campaign}">
        <f:if condition="{campaign.shortinfo}"><svg class="icon"><use xlink:href="{f:uri.resource(path:'Images/', extensionName: 'allegria_communications', useCacheBusting: false)}glyphicons-basics.svg#circle-info"></use></svg> {campaign.shortinfo}<br/></f:if>
        <f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Campaign" action="show" arguments="{campaign:campaign}" pageUid="39" class="btn btn-light w-100 mt-3 text-uppercase fw-bold">Zum Projekt</f:link.action>
      </f:if>
    </p>
    </f:if>
  </div>
</div>
</f:if>

<f:if condition="{type}=='logo'">
<div class="card">
  <f:if condition="{image}"><f:link.action extensionName="Publicrelations" pluginName="ClientShow" controller="Client" action="show" arguments="{client:client}" pageUid="39"><f:image image="{image}" maxHeight="500" class="card-img-top img-fluid" alt="{title}"/></f:link.action></f:if>
</div>
</f:if>
