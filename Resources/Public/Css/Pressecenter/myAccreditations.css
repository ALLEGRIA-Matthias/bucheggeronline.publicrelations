/*
  This rule targets only the cells in the "Funktionen" column
  and overrides the restrictive default styles.
*/
td[data-mdb-field="actions"] {
    overflow: visible !important;
}

.chart-area {
   height:150px;
   width:200px;
   margin-top: -50px;
}

@page {
    size: A4; /* Papierformat A4 */
    margin: 1.5cm; /* Ränder anpassen */
}

@media print {

    /* --- General Reset & Visibility --- */
    body * { visibility: hidden; }
    #c102, #c102 * { visibility: visible; }
    html, body, #c102, #accreditations-container {
        width: 100% !important;
        max-width: 100vw !important; /* Volle Breite erzwingen */
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        background: #fff !important;
        font-size: 8.5pt !important;
        color: #000 !important;
        overflow: visible !important; /* WICHTIG: Haupt-Scrollbars entfernen */
        position: static !important;
        box-sizing: border-box !important;
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
    }

    .frame-container-default {
        max-width: 100% !important;
    }

    /* --- Explizit ausblenden --- */
    header, footer, nav, aside, .modal, .modal-backdrop,
    #status-filter-wrapper, #accreditation-search-input, #create-new-accreditation-button, /* Filter/Suche/Button Zeile */
    .datatable-sort-icon /* Sortier-Pfeile */
    {
        display: none !important; visibility: hidden !important;
        position: absolute !important; width: 0 !important; height: 0 !important;
        overflow: hidden !important; margin: 0 !important; padding: 0 !important; border: none !important;
    }

    /* --- NEU: MDB Perfect Scrollbar & Wrapper resetten --- */
    /* Das ist der Fix für die 15 leeren Seiten und den Scroller */
    #datatable-accreditations .datatable-inner,
    #datatable-accreditations .table-responsive {
        overflow: visible !important; /* CRITICAL: Muss 'visible' sein, nicht 'auto' */
        height: auto !important; /* CRITICAL: Höhe zurücksetzen */
        max-height: none !important; /* CRITICAL: Max-Höhe entfernen */
        position: static !important; /* Position zurücksetzen */
        width: 100% !important;
        border: none !important;
        padding: 0 !important; margin: 0 !important;
        box-sizing: border-box !important;
    }
    /* Die Scrollbar-Leisten selbst komplett ausblenden */
    .ps__rail-x,
    .ps__rail-y {
        display: none !important;
        visibility: hidden !important;
    }

    /* --- NEU: Letzte Spalte (Funktionen) aggressiv ausblenden --- */
    /* Versteckt Header UND Body-Zellen der letzten Spalte */
    #datatable-accreditations th:last-child,
    #datatable-accreditations td:last-child {
        display: none !important;
        visibility: hidden !important;
        width: 0 !important;
        min-width: 0 !important;
        max-width: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
    }

    /* --- TYPO3 Frames --- */
    .section-default, .frame, .frame-default, .frame-group-container,
    .frame-group-inner, .frame-container, .frame-inner {
        border: none !important; padding: 0 !important; margin: 0 !important;
        box-shadow: none !important; background: none !important;
        width: 100% !important; display: block !important; position: static !important;
        box-sizing: border-box !important;
    }

    /* --- Heading --- */
    h1 {
        font-size: 13pt !important; margin-bottom: 0.5rem !important;
        padding: 0 !important; border: none !important;
        text-align: left !important; width: 100% !important;
        box-sizing: border-box !important;
    }
    h1 span.h5 { display: none !important; }

    /* --- Cards (WIEDER 4 SPALTEN, je 25%) --- */
     #accreditations-container > .row:first-of-type {
        display: flex !important; flex-wrap: nowrap !important;
        justify-content: space-between !important;
        width: 100% !important; margin: 0 0 0.5rem 0 !important; padding: 0 !important;
        border: none !important; page-break-inside: avoid !important;
        box-sizing: border-box !important;
    }
    /* Ziel jetzt ALLE .col-md-3 in dieser Reihe */
    #accreditations-container > .row:first-of-type > .d-print-block {
        display: block !important;
        flex: 0 0 calc(25% - 4px) !important; /* 25% Breite für 4 Cards */
        max-width: calc(25% - 4px) !important;
        width: calc(25% - 4px) !important;
        padding: 0 !important; margin: 0 2px !important; /* Minimaler Abstand */
        float: none !important; position: static !important; visibility: visible !important;
        border: 1px solid #aaa !important;
        page-break-inside: avoid !important; box-sizing: border-box !important;
    }
    #accreditations-container > .row:first-of-type .card { margin: 0 !important; border: none !important; box-shadow: none !important; height: auto !important; min-height: 0 !important; background: none !important; }
    #accreditations-container > .row:first-of-type .card-body { padding: 1rem !important; }
    #accreditations-container > .row:first-of-type h5.card-title { font-size: 8pt !important; font-weight: bold; margin-bottom: 1rem !important; }
    #accreditations-container > .row:first-of-type .small,
    #accreditations-container > .row:first-of-type .card-text,
    #accreditations-container > .row:first-of-type .card-text div { font-size: 7pt !important; margin-bottom: 0 !important; line-height: 1.4 !important; }

    /* Chart anzeigen */
    #accreditation-chart {
         display: block !important; visibility: visible !important;
         max-width: 100% !important; max-height: 100px !important;
         width: auto !important; height: auto !important; margin: 0 auto;
     }

     #accreditations-container .col-md-3:nth-child(2) .card-body > div[style*="height:150px"] {
         height: auto !important; width: 100% !important; margin: 0 !important; padding: 5px 0;
         display: flex; justify-content: center; align-items: center;
     }

     #accreditations-container .chart-area {
      height: 130px !important;
      width: 200px !important;
      margin-top: -25px !important;
      margin-bottom: -50px !important;
    }

    /* --- Icons --- */
    .fas, .far, .fab, [class^="fa-"], [class*=" fa-"] {
        color: #000 !important; opacity: 1 !important; visibility: visible !important;
        background: none !important;
    }

    /* --- Tabelle --- */
    #datatable-accreditations {
        margin-top: 0.5rem !important; width: 100% !important;
        border-collapse: collapse !important; border-spacing: 0 !important;
        table-layout: auto !important; border: 1px solid #aaa !important;
        page-break-inside: auto !important; box-sizing: border-box !important;
    }
    #datatable-accreditations table.table {
        width: 100% !important; margin: 0 !important; border: none !important;
        position: static !important; top: auto !important; left: auto !important;
        box-sizing: border-box !important;
    }

    /* MDB Datatable Overrides */
    #datatable-accreditations table, thead, tbody, tr, th, td {
        display: revert !important;
        position: static !important; float: none !important;
        width: auto !important; min-width: 0 !important; max-width: none !important; height: auto !important;
        visibility: visible !important; background: transparent !important;
        border: 1px solid #ccc !important; padding: 5px 10px !important;
        font-size: 7pt !important; line-height: 1.1 !important; vertical-align: top !important;
        word-wrap: break-word; overflow-wrap: break-word; white-space: normal !important;
        color: #000 !important; box-sizing: border-box !important;
    }
    /* Tabellenkopf Schwarz/Weiß */
    #datatable-accreditations thead th {
        background-color: #000 !important; color: #fff !important;
        font-weight: bold !important; white-space: nowrap !important;
        padding: 3px 5px !important;
        -webkit-print-color-adjust: exact !important; color-adjust: exact !important;
    }
    /* Zebra Striping */
    #datatable-accreditations tbody tr:nth-child(even) td {
        background-color: #f2f2f2 !important; /* Helles Grau */
        -webkit-print-color-adjust: exact !important; color-adjust: exact !important;
    }
    #datatable-accreditations tbody tr:nth-child(odd) td {
        background-color: #fff !important; /* Weiß */
        -webkit-print-color-adjust: exact !important; color-adjust: exact !important;
    }

    /* Badges mit Hintergrund */
    #datatable-accreditations .badge {
        padding: 1px 4px !important; font-size: 6.5pt !important; line-height: 1 !important;
        border: 1px solid #777 !important; border-radius: 2px !important;
        color: #000 !important; display: inline-block; vertical-align: middle; white-space: nowrap;
        margin: 0;
        -webkit-print-color-adjust: exact !important; color-adjust: exact !important;
    }
    /* Hier verwenden wir die originalen MDB-Farben, die sind oft schon pastellig */
    #datatable-accreditations .badge-success { background-color: #c3e6cb !important; border-color: #8fd19e !important; color: #155724 !important;}
    #datatable-accreditations .badge-warning { background-color: #ffeeba !important; border-color: #ffdb8b !important; color: #856404 !important;}
    #datatable-accreditations .badge-danger  { background-color: #f5c6cb !important; border-color: #f1b0b7 !important; color: #721c24 !important;}
    #datatable-accreditations .badge-info    { background-color: #bee5eb !important; border-color: #98d8e4 !important; color: #0c5460 !important;}

    /* Gast Info */
    #datatable-accreditations td[data-mdb-field="guest"] div.fw-bold { font-weight: bold !important; display: block; margin-bottom: 0; }
    #datatable-accreditations td[data-mdb-field="guest"] small { font-size: 6pt !important; color: #444 !important; display: block; margin-top: 0; }

    /* --- Seitenumbrüche --- */
    thead { display: table-header-group !important; }
    tbody { display: table-row-group !important; }
    tr    { display: table-row !important; page-break-inside: avoid !important; }
    th, td{ display: table-cell !important; }
    table { page-break-inside: auto; }
}